import{w as U,x as Ye,y as Aa,z as Ge,A as Na,b as Ca,j as a,C as Ra,H as La,F as fa,G as Je,I as qe,J as Oa,K as Da,L as da,M as ke,N as aa,D as Oe,O as wa,P as Ha,Q as Wa,R as qa,S as la,T as Ua,U as Va,V as za,W as ha,X as Fa,Y as Z,Z as ya,_ as ka,$ as Xe,a0 as Pa,a1 as $a,a2 as Ba,a3 as xa,a4 as Ka,a5 as Ea,a6 as Ya,a7 as Ga,a8 as Ja,a9 as Xa,aa as Qa,ab as Za,ac as ja,ad as er,ae as ar,af as ga,ag as rr,g as tr,ah as sr,ai as lr,p as nr,aj as N,ak as Qe,e as ir,t as F,a as A,n as or,o as $,al as p,am as ur,q as _,v as w,s as g,an as X,f as ye,ao as Ue,ap as cr,aq as Ze,c as vr}from"../chunks/06GCltyo.js";import{t as fr,d as dr,e as hr,i as Ae,a as Q,b as gr,s as T}from"../chunks/CSYUq-zz.js";function Ne(e,r){return r}function _r(e,r,t){for(var o=[],i=r.length,s,n=r.length,f=0;f<i;f++){let m=r[f];ka(m,()=>{if(s){if(s.pending.delete(m),s.done.add(m),s.pending.size===0){var b=e.outrogroups;ra(la(s.done)),b.delete(s),b.size===0&&(e.outrogroups=null)}}else n-=1},!1)}if(n===0){var u=o.length===0&&t!==null;if(u){var v=t,c=v.parentNode;$a(c),c.append(v),e.items.clear()}ra(r,!u)}else s={pending:new Set(r),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(s)}function ra(e,r=!0){for(var t=0;t<e.length;t++)Ba(e[t],r)}var _a;function Ce(e,r,t,o,i,s=null){var n=e,f=new Map,u=(r&Ea)!==0;if(u){var v=e;n=U?Ye(Aa(v)):v.appendChild(Ge())}U&&Na();var c=null,m=Wa(()=>{var d=t();return qa(d)?d:d==null?[]:la(d)}),b,y=!0;function I(){l.fallback=c,pr(l,b,n,r,o),c!==null&&(b.length===0?(c.f&Z)===0?ya(c):(c.f^=Z,Le(c,null,n)):ka(c,()=>{c=null}))}var B=Ca(()=>{b=a(m);var d=b.length;let j=!1;if(U){var K=Ra(n)===La;K!==(d===0)&&(n=fa(),Ye(n),Je(!1),j=!0)}for(var x=new Set,V=ke,L=Ha(),E=0;E<d;E+=1){U&&qe.nodeType===Oa&&qe.data===Da&&(n=qe,j=!0,Je(!1));var Y=b[E],ee=o(Y,E),S=y?null:f.get(ee);S?(S.v&&da(S.v,Y),S.i&&da(S.i,E),L&&V.unskip_effect(S.e)):(S=mr(f,y?n:_a??(_a=Ge()),Y,ee,E,i,r,t),y||(S.e.f|=Z),f.set(ee,S)),x.add(ee)}if(d===0&&s&&!c&&(y?c=aa(()=>s(n)):(c=aa(()=>s(_a??(_a=Ge()))),c.f|=Z)),d>x.size&&(Oe?br(b,o):wa("","","")),U&&d>0&&Ye(fa()),!y)if(L){for(const[G,le]of f)x.has(G)||V.skip_effect(le.e);V.oncommit(I),V.ondiscard(()=>{})}else I();j&&Je(!0),a(m)}),l={effect:B,items:f,outrogroups:null,fallback:c};y=!1,U&&(n=qe)}function Re(e){for(;e!==null&&(e.f&Pa)===0;)e=e.next;return e}function pr(e,r,t,o,i){var S,G,le,ne,fe,xe,de,he,Ee;var s=(o&Ya)!==0,n=r.length,f=e.items,u=Re(e.effect.first),v,c=null,m,b=[],y=[],I,B,l,d;if(s)for(d=0;d<n;d+=1)I=r[d],B=i(I,d),l=f.get(B).e,(l.f&Z)===0&&((G=(S=l.nodes)==null?void 0:S.a)==null||G.measure(),(m??(m=new Set)).add(l));for(d=0;d<n;d+=1){if(I=r[d],B=i(I,d),l=f.get(B).e,e.outrogroups!==null)for(const C of e.outrogroups)C.pending.delete(l),C.done.delete(l);if((l.f&Z)!==0)if(l.f^=Z,l===u)Le(l,null,t);else{var j=c?c.next:u;l===e.effect.last&&(e.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),se(e,c,l),se(e,l,j),Le(l,j,t),c=l,b=[],y=[],u=Re(c.next);continue}if((l.f&Xe)!==0&&(ya(l),s&&((ne=(le=l.nodes)==null?void 0:le.a)==null||ne.unfix(),(m??(m=new Set)).delete(l))),l!==u){if(v!==void 0&&v.has(l)){if(b.length<y.length){var K=y[0],x;c=K.prev;var V=b[0],L=b[b.length-1];for(x=0;x<b.length;x+=1)Le(b[x],K,t);for(x=0;x<y.length;x+=1)v.delete(y[x]);se(e,V.prev,L.next),se(e,c,V),se(e,L,K),u=K,c=L,d-=1,b=[],y=[]}else v.delete(l),Le(l,u,t),se(e,l.prev,l.next),se(e,l,c===null?e.effect.first:c.next),se(e,c,l),c=l;continue}for(b=[],y=[];u!==null&&u!==l;)(v??(v=new Set)).add(u),y.push(u),u=Re(u.next);if(u===null)continue}(l.f&Z)===0&&b.push(l),c=l,u=Re(l.next)}if(e.outrogroups!==null){for(const C of e.outrogroups)C.pending.size===0&&(ra(la(C.done)),(fe=e.outrogroups)==null||fe.delete(C));e.outrogroups.size===0&&(e.outrogroups=null)}if(u!==null||v!==void 0){var E=[];if(v!==void 0)for(l of v)(l.f&Xe)===0&&E.push(l);for(;u!==null;)(u.f&Xe)===0&&u!==e.fallback&&E.push(u),u=Re(u.next);var Y=E.length;if(Y>0){var ee=(o&Ea)!==0&&n===0?t:null;if(s){for(d=0;d<Y;d+=1)(de=(xe=E[d].nodes)==null?void 0:xe.a)==null||de.measure();for(d=0;d<Y;d+=1)(Ee=(he=E[d].nodes)==null?void 0:he.a)==null||Ee.fix()}_r(e,E,ee)}}s&&xa(()=>{var C,Se;if(m!==void 0)for(l of m)(Se=(C=l.nodes)==null?void 0:C.a)==null||Se.apply()})}function mr(e,r,t,o,i,s,n,f){var u=(n&Ua)!==0?(n&Va)===0?za(t,!1,!1):ha(t):null,v=(n&Fa)!==0?ha(i):null;return Oe&&u&&(u.trace=()=>{f()[(v==null?void 0:v.v)??i]}),{v:u,i:v,e:aa(()=>(s(r,u??t,v??i,f),()=>{e.delete(o)}))}}function Le(e,r,t){if(e.nodes)for(var o=e.nodes.start,i=e.nodes.end,s=r&&(r.f&Z)===0?r.nodes.start:t;o!==null;){var n=Ka(o);if(s.before(o),o===i)return;o=n}}function se(e,r,t){r===null?e.effect.first=t:r.next=t,t===null?e.effect.last=r:t.prev=r}function br(e,r){const t=new Map,o=e.length;for(let i=0;i<o;i++){const s=r(e[i],i);if(t.has(s)){const n=String(t.get(s)),f=String(i);let u=String(s);u.startsWith("[object ")&&(u=null),wa(n,f,u)}t.set(s,i)}}function P(e,r,t,o,i,s){var n=e.__className;if(U||n!==t||n===void 0){var f=fr(t,o,s);(!U||f!==e.getAttribute("class"))&&(f==null?e.removeAttribute("class"):e.className=f),e.__className=t}else if(s&&i!==s)for(var u in s){var v=!!s[u];(i==null||v!==!!i[u])&&e.classList.toggle(u,v)}return s}const wr=Symbol("is custom element"),yr=Symbol("is html"),kr=Qa?"link":"LINK";function xr(e){if(U){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var o=e.value;ta(e,"value",null),e.value=o}if(e.hasAttribute("checked")){var i=e.checked;ta(e,"checked",null),e.checked=i}}};e.__on_r=t,xa(t),Ga()}}function ta(e,r,t,o){var i=Er(e);if(U&&(i[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName===kr)){Mr(e,r,t??"");return}i[r]!==(i[r]=t)&&(r==="loading"&&(e[Ja]=t),t==null?e.removeAttribute(r):typeof t!="string"&&Sr(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function Er(e){return e.__attributes??(e.__attributes={[wr]:e.nodeName.includes("-"),[yr]:e.namespaceURI===Xa})}var pa=new Map;function Sr(e){var r=e.getAttribute("is")||e.nodeName,t=pa.get(r);if(t)return t;pa.set(r,t=[]);for(var o,i=e,s=Element.prototype;s!==i;){o=er(i);for(var n in o)o[n].set&&t.push(n);i=ja(i)}return t}function Mr(e,r,t){Oe&&(r==="srcset"&&Tr(e,t)||sa(e.getAttribute(r)??"",t)||Za(r,e.outerHTML.replace(e.innerHTML,e.innerHTML&&"..."),String(t)))}function sa(e,r){return e===r?!0:new URL(e,document.baseURI).href===new URL(r,document.baseURI).href}function ma(e){return e.split(",").map(r=>r.trim().split(" ").filter(Boolean))}function Tr(e,r){var t=ma(e.srcset),o=ma(r);return o.length===t.length&&o.every(([i,s],n)=>s===t[n][1]&&(sa(t[n][0],i)||sa(i,t[n][0])))}function Ir(e,r,t=r){var o=new WeakSet;ar(e,"input",async i=>{Oe&&e.type==="checkbox"&&ga();var s=i?e.defaultValue:e.value;if(s=je(e)?ea(s):s,t(s),ke!==null&&o.add(ke),await rr(),s!==(s=r())){var n=e.selectionStart,f=e.selectionEnd,u=e.value.length;if(e.value=s??"",f!==null){var v=e.value.length;n===f&&f===u&&v>u?(e.selectionStart=v,e.selectionEnd=v):(e.selectionStart=n,e.selectionEnd=Math.min(f,v))}}}),(U&&e.defaultValue!==e.value||tr(r)==null&&e.value)&&(t(je(e)?ea(e.value):e.value),ke!==null&&o.add(ke)),sr(()=>{Oe&&e.type==="checkbox"&&ga();var i=r();if(e===document.activeElement){var s=lr??ke;if(o.has(s))return}je(e)&&i===ea(e.value)||e.type==="date"&&!i&&!e.value||i!==e.value&&(e.value=i??"")})}function je(e){var r=e.type;return r==="number"||r==="range"}function ea(e){return e===""?null:+e}const Ar=["the","be","to","of","and","a","in","that","have","I","it","for","not","on","with","he","as","you","do","at","this","but","his","by","from","they","we","say","her","she","or","an","will","my","one","all","would","there","their","what","so","up","out","if","about","who","get","which","go","me","when","make","can","like","time","no","just","him","know","take","people","into","year","your","good","some","could","them","see","other","than","then","now","look","only","come","its","over","think","also","back","after","use","two","how","our","work","first","well","way","even","new","want","because","any","these","give","day","most","us","great","between","need","large","under","never","city","tree","cross","farm","hard","start","might","story","far","sea","draw","left","late","run","while","press","close","night","real","life","few","north","open","seem","together","next","white","children","begin","got","walk","example","ease","paper","group","always","music","those","both","mark","often","letter","until","mile","river","car","feet","care","second","book","carry","took","rain","eat","room","friend","began","idea","fish","mountain","stop","once","base","hear","horse","cut","sure","watch","color","face","wood","main","enough","plain","girl","usual","young","ready","above","ever","red","list","though","feel","talk","bird","soon","body","dog","family","direct","pose","leave","song","measure","door","product","black","short","numeral","class","wind","question","happen","complete","ship","area","half","rock","order","fire","south","problem","piece","told","knew","pass","since","top","whole","king","space","heard","best","hour","better","true","during","hundred","five","remember","step","early","hold","west","ground","interest","reach","fast","verb","sing","listen","six","table"],Nr=["function","return","const","let","var","class","import","export","default","async","await","promise","callback","array","object","string","number","boolean","null","undefined","typeof","instanceof","interface","type","enum","module","render","component","state","props","effect","context","reducer","dispatch","fetch","response","request","server","client","route","middleware","handler","database","query","schema","model","migration","index","primary","foreign","docker","container","image","volume","network","deploy","build","test","git","commit","branch","merge","rebase","push","pull","clone","algorithm","binary","tree","graph","stack","queue","hash","sort","debug","error","warning","log","trace","config","environment","variable"];function ba(e,r=30){const t=[];for(let o=0;o<r;o++)t.push(e[Math.floor(Math.random()*e.length)]);return t}var Cr=$("<span> </span>"),Rr=$('<span class="char char-extra svelte-1uha8ag"> </span>'),Lr=$("<!> <!>",1),Or=$("<span><!></span> ",1),Dr=$('<div> </div> <div class="word-display svelte-1uha8ag"></div> <input class="hidden-input svelte-1uha8ag" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/> <div class="hint svelte-1uha8ag"><!></div>',1),Hr=$("<span> </span> ",1),Wr=$('<div class="history-item svelte-1uha8ag"><span class="h-wpm svelte-1uha8ag"> </span> <span class="h-acc svelte-1uha8ag"> </span> <span class="h-mode svelte-1uha8ag"> </span> <span class="h-dur svelte-1uha8ag"> </span></div>'),qr=$('<div class="history svelte-1uha8ag"><h3 class="svelte-1uha8ag">Recent Results</h3> <div class="history-list svelte-1uha8ag"></div></div>'),Ur=$('<div class="results svelte-1uha8ag"><div class="result-grid svelte-1uha8ag"><div class="result-card main svelte-1uha8ag"><div class="result-value svelte-1uha8ag"> </div> <div class="result-label svelte-1uha8ag">WPM</div></div> <div class="result-card svelte-1uha8ag"><div class="result-value svelte-1uha8ag"> </div> <div class="result-label svelte-1uha8ag">Accuracy</div></div> <div class="result-card svelte-1uha8ag"><div class="result-value svelte-1uha8ag"> </div> <div class="result-label svelte-1uha8ag">Raw WPM</div></div> <div class="result-card svelte-1uha8ag"><div class="result-value svelte-1uha8ag"> <span class="small svelte-1uha8ag"> </span></div> <div class="result-label svelte-1uha8ag">Correct</div></div></div> <div class="word-review svelte-1uha8ag"></div> <button class="restart-btn svelte-1uha8ag">Try Again ↻</button></div> <!>',1),Vr=$('<div class="container svelte-1uha8ag"><header class="svelte-1uha8ag"><h1 class="svelte-1uha8ag">⚡ Typing Test</h1> <div class="controls svelte-1uha8ag"><div class="btn-group svelte-1uha8ag"><button>English</button> <button>Code</button></div> <div class="btn-group svelte-1uha8ag"><button>15s</button> <button>30s</button> <button>60s</button> <button>120s</button></div></div></header> <!></div>');function Pr(e,r){nr(r,!0);let t=N("common"),o=N(30),i=N(Qe([])),s=N(0),n=N(""),f=N(!1),u=N(!1),v=N(0),c=N(null),m=N(Qe([])),b=N(0),y=N(null),I=N(Qe([])),B=X(()=>a(t)==="code"?Nr:Ar),l=X(()=>a(m).filter(h=>h.correct).length),d=X(()=>a(m).reduce((h,R)=>h+R.typed.length+1,0)),j=X(()=>a(m).filter(h=>h.correct).reduce((h,R)=>h+R.typed.length+1,0)),K=X(()=>a(u)?Math.round(a(j)/5/(a(o)/60)):0),x=X(()=>a(u)?Math.round(a(d)/5/(a(o)/60)):0),V=X(()=>a(m).length>0?Math.round(a(l)/a(m).length*100):100);function L(){p(i,ba(a(B),80),!0),p(s,0),p(n,""),p(f,!1),p(u,!1),p(v,a(o),!0),p(m,[],!0),p(b,0),a(c)&&clearInterval(a(c)),p(c,null),setTimeout(()=>{var h;return(h=a(y))==null?void 0:h.focus()},50)}function E(){p(f,!0),p(b,Date.now(),!0),p(v,a(o),!0),p(c,setInterval(()=>{p(v,Math.max(0,a(o)-Math.floor((Date.now()-a(b))/1e3)),!0),a(v)<=0&&Y()},100),!0)}function Y(){if(p(u,!0),a(c)&&clearInterval(a(c)),p(c,null),a(m).length>0){p(I,[...a(I),{wpm:a(K),rawWpm:a(x),accuracy:a(V),mode:a(t),duration:a(o),date:new Date().toISOString()}].slice(-20),!0);try{localStorage.setItem("typing-history",JSON.stringify(a(I)))}catch{}}}function ee(h){if(!a(u)&&(!a(f)&&h.key.length===1&&E(),h.key===" "||h.key==="Enter")){if(h.preventDefault(),a(n).trim()==="")return;const R=a(n).trim(),O=a(i)[a(s)];p(m,[...a(m),{typed:R,expected:O,correct:R===O}],!0),cr(s),p(n,""),a(s)>=a(i).length&&p(i,[...a(i),...ba(a(B),40)],!0)}}function S(h){p(t,h,!0),L()}function G(h){p(o,h,!0),L()}ir(()=>{try{const h=localStorage.getItem("typing-history");h&&p(I,JSON.parse(h),!0)}catch{}L()});function le(){var h;(h=a(y))==null||h.focus()}var ne=Vr();hr("keydown",ur,le);var fe=_(ne),xe=w(_(fe),2),de=_(xe),he=_(de);let Ee;var C=w(he,2);let Se;g(de);var na=w(de,2),Ve=_(na);let ia;var ze=w(Ve,2);let oa;var Fe=w(ze,2);let ua;var ca=w(Fe,2);let va;g(na),g(xe),g(fe);var Sa=w(fe,2);{var Ma=h=>{var R=Dr(),O=ye(R);let ge;var Me=_(O,!0);g(O);var _e=w(O,2);Ce(_e,21,()=>a(i).slice(Math.max(0,a(s)-5),a(s)+40),Ne,(M,D,He)=>{const oe=X(()=>He+Math.max(0,a(s)-5)),me=X(()=>a(m)[a(oe)]);var Ie=Or(),be=ye(Ie);let we;var $e=_(be);{var Be=k=>{var H=Lr(),z=ye(H);Ce(z,17,()=>a(D).split(""),Ne,(W,ae,q)=>{var re=Cr();let te;var ve=_(re,!0);g(re),F(()=>{te=P(re,1,"char svelte-1uha8ag",null,te,{"char-correct":a(n)[q]&&a(n)[q]===a(ae),"char-wrong":a(n)[q]&&a(n)[q]!==a(ae),"char-cursor":q===a(n).length}),T(ve,a(ae))}),A(W,re)});var J=w(z,2);{var ce=W=>{var ae=vr(),q=ye(ae);Ce(q,17,()=>a(n).slice(a(D).length).split(""),Ne,(re,te)=>{var ve=Rr(),We=_(ve,!0);g(ve),F(()=>T(We,a(te))),A(re,ve)}),A(W,ae)};Ae(J,W=>{a(n).length>a(D).length&&W(ce)})}A(k,H)},Ke=k=>{var H=Ze();F(()=>T(H,a(D))),A(k,H)};Ae($e,k=>{a(oe)===a(s)?k(Be):k(Ke,!1)})}g(be);var ue=w(be,1,!0);ue.nodeValue=" ",F(()=>{var k;return we=P(be,1,"word svelte-1uha8ag",null,we,{current:a(oe)===a(s),correct:(k=a(me))==null?void 0:k.correct,wrong:a(me)&&!a(me).correct,upcoming:a(oe)>a(s)})}),A(M,Ie)}),g(_e);var ie=w(_e,2);xr(ie),gr(ie,M=>p(y,M),()=>a(y));var pe=w(ie,2),De=_(pe);{var Pe=M=>{var D=Ze("Start typing to begin...");A(M,D)},Te=M=>{var D=Ze();F(()=>T(D,`${a(l)??""} words`)),A(M,D)};Ae(De,M=>{a(f)?M(Te,!1):M(Pe)})}g(pe),F(()=>{ge=P(O,1,"timer svelte-1uha8ag",null,ge,{urgent:a(v)<=5&&a(f)}),T(Me,a(f)?a(v):a(o))}),Q("keydown",ie,ee),Ir(ie,()=>a(n),M=>p(n,M)),A(h,R)},Ta=h=>{var R=Ur(),O=ye(R),ge=_(O),Me=_(ge),_e=_(Me),ie=_(_e,!0);g(_e),Ue(2),g(Me);var pe=w(Me,2),De=_(pe),Pe=_(De);g(De),Ue(2),g(pe);var Te=w(pe,2),M=_(Te),D=_(M,!0);g(M),Ue(2),g(Te);var He=w(Te,2),oe=_(He),me=_(oe,!0),Ie=w(me),be=_(Ie);g(Ie),g(oe),Ue(2),g(He),g(ge);var we=w(ge,2);Ce(we,21,()=>a(m),Ne,(ue,k)=>{var H=Hr(),z=ye(H);let J;var ce=_(z,!0);g(z);var W=w(z,1,!0);W.nodeValue=" ",F(()=>{J=P(z,1,"review-word svelte-1uha8ag",null,J,{correct:a(k).correct,wrong:!a(k).correct}),ta(z,"title",a(k).correct?"":`typed: ${a(k).typed}`),T(ce,a(k).expected)}),A(ue,H)}),g(we);var $e=w(we,2);g(O);var Be=w(O,2);{var Ke=ue=>{var k=qr(),H=w(_(k),2);Ce(H,21,()=>[...a(I)].reverse().slice(0,10),Ne,(z,J)=>{var ce=Wr(),W=_(ce),ae=_(W);g(W);var q=w(W,2),re=_(q);g(q);var te=w(q,2),ve=_(te,!0);g(te);var We=w(te,2),Ia=_(We);g(We),g(ce),F(()=>{T(ae,`${a(J).wpm??""} WPM`),T(re,`${a(J).accuracy??""}%`),T(ve,a(J).mode),T(Ia,`${a(J).duration??""}s`)}),A(z,ce)}),g(H),g(k),A(ue,k)};Ae(Be,ue=>{a(I).length>1&&ue(Ke)})}F(()=>{T(ie,a(K)),T(Pe,`${a(V)??""}%`),T(D,a(x)),T(me,a(l)),T(be,`/${a(m).length??""}`)}),Q("click",$e,L),A(h,R)};Ae(Sa,h=>{a(u)?h(Ta,!1):h(Ma)})}g(ne),F(()=>{Ee=P(he,1,"svelte-1uha8ag",null,Ee,{active:a(t)==="common"}),Se=P(C,1,"svelte-1uha8ag",null,Se,{active:a(t)==="code"}),ia=P(Ve,1,"svelte-1uha8ag",null,ia,{active:a(o)===15}),oa=P(ze,1,"svelte-1uha8ag",null,oa,{active:a(o)===30}),ua=P(Fe,1,"svelte-1uha8ag",null,ua,{active:a(o)===60}),va=P(ca,1,"svelte-1uha8ag",null,va,{active:a(o)===120})}),Q("click",ne,le),Q("click",he,()=>S("common")),Q("click",C,()=>S("code")),Q("click",Ve,()=>G(15)),Q("click",ze,()=>G(30)),Q("click",Fe,()=>G(60)),Q("click",ca,()=>G(120)),A(e,ne),or()}dr(["click","keydown"]);export{Pr as component};
